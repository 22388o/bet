<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bet: Compilation Guidelines</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Bet"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bet
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/d75/md_docs_protocol_compile.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Compilation Guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>You can either compile the project manually or run it using Docker. Compilation is pretty lengthy :)</p>
<h1><a class="anchor" id="autotoc_md44"></a>
Docker</h1>
<p>All the dependencies have already been cloned/compiled in the docker container.</p>
<p>Please refer to <a href="https://github.com/chips-blockchain/docker">https://github.com/chips-blockchain/docker</a> for information on Docker.</p>
<h1><a class="anchor" id="autotoc_md45"></a>
Compilation steps</h1>
<p>Tested with Ubuntu 16.04 and Ubuntu 18.04</p>
<h2><a class="anchor" id="autotoc_md46"></a>
Dependencies Check</h2>
<div class="fragment"><div class="line">sudo apt-get update</div>
<div class="line">sudo apt-get install software-properties-common autoconf git build-essential libtool libprotobuf-c-dev libgmp-dev libsqlite3-dev python python3 python3-mako zip libevent-dev pkg-config libssl-dev libcurl4-gnutls-dev make libboost-all-dev automake jq wget ninja-build libsqlite3-dev libgmp3-dev valgrind libcli-dev libsecp256k1-dev libsodium-dev libbase58-dev nano tmux</div>
<div class="line"> </div>
<div class="line"># Install Berkeley 4.8 db libs (chips dependecy)</div>
<div class="line"># Source: https://cryptoandcoffee.com/mining-gems/install-berkeley-4-8-db-libs-on-ubuntu-16-04/</div>
<div class="line">mkdir ~/db-4.8.30 &amp;&amp; cd ~/db-4.8.30 &amp;&amp; wget http://download.oracle.com/berkeley-db/db-4.8.30.zip &amp;&amp; unzip db-4.8.30.zip</div>
<div class="line">cd db-4.8.30 &amp;&amp; cd build_unix/ &amp;&amp; ../dist/configure --prefix=/usr/local --enable-cxx &amp;&amp; make &amp;&amp; sudo make install</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
Installing CHIPS</h2>
<div class="fragment"><div class="line">cd ~ &amp;&amp; git clone https://github.com/chips-blockchain/chips &amp;&amp; cd chips &amp;&amp; ./build.sh</div>
<div class="line">cd ~/chips/src</div>
<div class="line">sudo ln -s $HOME/chips/src/chipsd /usr/local/bin/</div>
<div class="line">sudo ln -s $HOME/chips/src/chips-cli /usr/local/bin/</div>
<div class="line">sudo ldconfig /usr/local/lib</div>
<div class="line"> </div>
<div class="line">--------------------</div>
<div class="line"># Bootstraping CHIPS</div>
<div class="line">--------------------</div>
<div class="line">mkdir $HOME/.chips/ &amp;&amp; cd $HOME/.chips/ &amp;&amp; wget http://bootstrap3rd.dexstats.info/CHIPS-bootstrap.tar.gz</div>
<div class="line">tar xvzf CHIPS-bootstrap.tar.gz</div>
<div class="line">rm CHIPS-bootstrap.tar.gz</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md48"></a>
Running CHIPS Daemon</h2>
<p><b>Create <code>chips.conf</code> file:</b></p>
<p>Create <code>chips.conf</code> file with random username, password, txindex and daemon turned on.</p>
<p>You can copy the following lines in your bash shell and press enter. It will create the CHIPS configuration file with random RPC username and password with all needed settings.</p>
<div class="fragment"><div class="line">mkdir -p $HOME/.chips/</div>
<div class="line">echo &quot;server=1</div>
<div class="line">daemon=1</div>
<div class="line">txindex=1</div>
<div class="line">rpcuser=$(openssl rand -base64 12)</div>
<div class="line">rpcpassword=$(openssl rand -base64 12)</div>
<div class="line">addnode=159.69.23.29</div>
<div class="line">addnode=95.179.192.102</div>
<div class="line">addnode=149.56.29.163</div>
<div class="line">addnode=145.239.149.173</div>
<div class="line">addnode=178.63.53.110</div>
<div class="line">addnode=151.80.108.76</div>
<div class="line">addnode=185.137.233.199</div>
<div class="line">rpcbind=127.0.0.1</div>
<div class="line">rpcallowip=127.0.0.1&quot; &gt; $HOME/.chips/chips.conf</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md49"></a>
Run CHIPS daemon</h3>
<div class="fragment"><div class="line">cd ~</div>
<div class="line">chipsd</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md50"></a>
Check if CHIPS is running</h3>
<div class="fragment"><div class="line">chips-cli getinfo</div>
</div><!-- fragment --><p>The output might be an error followed by <code>Loading blocks...</code>. CHIPS is loading our bootstrapped blocks. Just give it some time and try again later. Successful result is an object with info.</p>
<h3><a class="anchor" id="autotoc_md51"></a>
Preview block download status</h3>
<div class="fragment"><div class="line">cd ~</div>
<div class="line">tail -f $HOME/.chips/debug.log</div>
</div><!-- fragment --><p>You should see something like below. If new lines are added quickly and the dates are in the past the chain is being synced. If new lines are slow to appear, the chain has been synced and is adding new blocks in real time.</p>
<div class="fragment"><div class="line">2020-12-21T22:17:29Z UpdateTip: new best=0000000000001ce73ea95c83670afc1c10f20f1a8034aff91070b9e61916c647 height=6741707 version=0x20000000 log2_work=75.981897 tx=6966436 date=&#39;2020-08-16T10:30:21Z&#39; progress=1.000000 cache=0.4MiB(2698txo)</div>
<div class="line">2020-12-21T22:17:29Z UpdateTip: new best=000000000000d0835bdfd153721c2a169966d5a3fc6ed4e244c41420c7d50b6f height=6741708 version=0x20000000 log2_work=75.981897 tx=6966437 date=&#39;2020-08-16T10:32:15Z&#39; progress=1.000000 cache=0.4MiB(2699txo)</div>
<div class="line">2020-12-21T22:17:29Z UpdateTip: new best=00000000000022826e9293b8075ba5a207f71d33abe14ff9abeae7005abe92d4 height=6741709 version=0x20000000 log2_work=75.981897 tx=6966438 date=&#39;2020-08-16T10:33:53Z&#39; progress=1.000000 cache=0.4MiB(2700txo)</div>
<div class="line">2020-12-21T22:17:29Z UpdateTip: new best=000000000001f55c8e27c5daeb7dac9c5f863af5d465090e5173f51a0556e9ef height=6741710 version=0x20000000 log2_work=75.981897 tx=6966439 date=&#39;2020-08-16T10:34:54Z&#39; progress=1.000000 cache=0.4MiB(2701txo)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md52"></a>
Installing Lightning Network Node</h2>
<div class="fragment"><div class="line">cd ~ &amp;&amp; git clone https://github.com/chips-blockchain/lightning.git</div>
<div class="line">cd lightning &amp;&amp; make</div>
<div class="line">sudo ln -s $HOME/lightning/lightningd/lightningd /usr/local/bin/</div>
<div class="line">sudo ln -s $HOME/lightning/cli/lightning-cli /usr/local/bin/</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md53"></a>
Running the Lightning Daemon</h2>
<p>NOTE: You do not need to run Lightning Network Daemon until CHIPS daemon is fully synced. You can tell if the CHIPS daemon is fully synced by looking at the commad output of <code>chips-cli getinfo</code>, where the output of <code>blocks</code> and <code>headers</code> will be matching. Example:</p>
<div class="fragment"><div class="line">chips-cli getinfo</div>
<div class="line">{</div>
<div class="line">  ...</div>
<div class="line">  ...</div>
<div class="line">  &quot;chain&quot;: &quot;main&quot;,</div>
<div class="line">  &quot;blocks&quot;: 7709392,</div>
<div class="line">  &quot;headers&quot;: 7709392,</div>
<div class="line">  ...</div>
<div class="line">  ...</div>
<div class="line">} </div>
</div><!-- fragment --><p>Once the CHIPS daemon is fully synced with the network, run Lightning Network Daemon. It shouldn't take much time to sync with CHIPS blockchain if CHIPS is fully synced. Its still a good idea to run it in a tmux session.</p>
<div class="fragment"><div class="line"># Create a tmux session</div>
<div class="line">tmux new -s lightning</div>
<div class="line"> </div>
<div class="line"># Then inside the tmux session you&#39;ve just created</div>
<div class="line">lightningd --log-level=debug &amp;</div>
<div class="line"># CTRL + B, then D to detach from the tmux session, to attach to the session again `tmux a -t lightning`</div>
<div class="line"> </div>
<div class="line"># Get chain info - If it returns your node’s id, you’re all set.</div>
<div class="line">lightning-cli getinfo</div>
<div class="line"> </div>
<div class="line"># If you don&#39;t see output `lightning-cli` of this command formatted, you can add `jq` with pipe command like following:</div>
<div class="line">lightning-cli getinfo | jq .</div>
<div class="line"> </div>
<div class="line"># Get a new address to fund your Lightning Node</div>
<div class="line"># This returns an address, which needs to be funded first in order to open a channel with another node.</div>
<div class="line">lightning-cli newaddr</div>
<div class="line"> </div>
<div class="line"># Run the following command to check if your node has funds</div>
<div class="line">lightning-cli listfunds</div>
<div class="line"> </div>
<div class="line"># Optionally, using these two parameters, you can connect to a node visible on the LN explorer</div>
<div class="line">lightning-cli connect</div>
<div class="line">lightning-cli fundchannel</div>
</div><!-- fragment --><p>Join the <a href="https://discord.gg/bcSpzWb">CHIPS discord</a> to get a small amount of CHIPS</p>
<p><a href="https://tmuxcheatsheet.com/">Tmux cheatsheet</a></p>
<h2><a class="anchor" id="autotoc_md54"></a>
Installing Bet</h2>
<p>Then clone BET repo and build the binaries</p>
<div class="fragment"><div class="line">git clone https://github.com/chips-blockchain/bet</div>
<div class="line">cd bet</div>
<div class="line">./configure</div>
<div class="line">make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md55"></a>
Running Bet Dealer</h2>
<p>First determin what is the public IP of your server/VPS/VM/node. You probably know that already if you connected to this server over the internet through ssh terminal connection. In any case, you can also use the following command to get the public IP of your node:</p>
<p>NOTE: If you see the following output running <code>./bet</code> command for the first time, just execute the same command again. This seems to be the bug, and will be resolved in future updates to <code>bet</code>:</p>
<div class="fragment"><div class="line">./bet cashier 51.222.150.52</div>
<div class="line">ln is in sync with chips</div>
<div class="line">sqlite3_init_db_name::36::db_name::/home/satinder/.bet/db/pangea.db</div>
<div class="line">corrupted size vs. prev_size</div>
<div class="line">Aborted</div>
</div><!-- fragment --><div class="fragment"><div class="line">curl ifconfig.co</div>
<div class="line"># Example output would be like 45.77.139.155, which you can use in next commands.</div>
</div><!-- fragment --><div class="fragment"><div class="line"># e.g. Dealer node is at 45.77.139.155 (you will know this IP from someone who will be running a dealer node OR you can run the dealer node yourself)</div>
<div class="line">$ cd ~/bet/privatebet &amp;&amp; ./bet dcv 45.77.139.155</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md56"></a>
Running Bet Player</h2>
<div class="fragment"><div class="line">cd ~/bet/privatebet &amp;&amp; ./bet player</div>
</div><!-- fragment --><p>You might see something like this when running bet for the first time. The number of blocks will keep on rising. This means LN is not synced. You just need to let it be for a while and let it sync. Feel free to exit the currently running command. The sync is happening in the background in the tmux session that you have started earlier. </p><div class="fragment"><div class="line">root@959aa68123b4:~/bet# cd ~/bet/privatebet &amp;&amp; ./bet dcv 45.77.139.155</div>
<div class="line">ln is 48513 blocks behind chips network</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 22 2021 18:33:23 for Bet by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
