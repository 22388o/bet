<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bet: Introduction</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Bet"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bet
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,true,'search.php','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/d3e/md_docs_protocol_handling_funds.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Since the pangea is fully decentralized protocol, the funds needed during the game will be managed from the player's backend wallet. The simple thing if one wants to play using any gaming application designed over pangea protocol, the player needs to deposit the funds to the address which the player owns and can withdraw to the addresses which the player owns in the backend wallet.</p>
<h1><a class="anchor" id="autotoc_md69"></a>
Depositing the Funds</h1>
<p>When the player connects to the backend node via GUI, the below information is pushed to the GUI from the backend. The backend node gives the details about the existing balance, and the addr which the backend node can spent any tx associated to it. </p><div class="fragment"><div class="line">{</div>
<div class="line">    method: &quot;walletInfo&quot;, </div>
<div class="line">    addr: &quot;bQepVNtzfjMaBJdaaCq68trQDAPDgKnwrD&quot;, </div>
<div class="line">    balance: 0.13269034</div>
<div class="line">}</div>
</div><!-- fragment --><p> Depending on the stack size and the amount of CHIPS available, the player node deposit any amount greter than <code>(stack_size-balance-tx_fee)</code> in order to join the corresponding table and play.</p>
<h2><a class="anchor" id="autotoc_md70"></a>
Conditions on depositing the funds</h2>
<ol type="1">
<li>Funds can be transferred from any address to the address provided by the backend node.</li>
</ol>
<h1><a class="anchor" id="autotoc_md71"></a>
Withdrawing the Funds</h1>
<p>At any point of time, if the player wants to withdraw the funds then player can only withdraw the funds to any of the addresses owned by the backend wallet. The reson for this restriction is, players are connecting to the backend just by entering the IP of the back end node in the GUI. So if the betting node is running in the backend, then anyone with the knowledge of the IP can actually connect to the backend and there is no authorization required for this to happen. So player can connect to the backend node without any authorization in order to play the game, during such scenarios if we allow withdraw the funds to any address then there is a possibility that attacker/intruder can withdraw funds to his own wallet. By restricting the withdrawl of funds only to the addresses which belong to the backend node, we can prevent the unauthorized withdrawl of the funds.</p>
<p>The sequence of steps that occur during the withdrawl of the funds is depicted below: </p>
<h2><a class="anchor" id="autotoc_md72"></a>
step1: GUI sends withdrawRequest to the backend</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">   method: withdrawRequest</div>
<div class="line">}</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md73"></a>
step2: Backend sends withdrawResponse to the GUI</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    method: withdrawResponse,</div>
<div class="line">    balace: xxxx,</div>
<div class="line">    addr: [addr1,addr2,...,addrn]</div>
<div class="line">}</div>
</div><!-- fragment --><p> Where <code>addr</code> contains the list of addresses which are owned by the backend wallet. </p>
<h2><a class="anchor" id="autotoc_md74"></a>
step3: GUI sends withdraw to the backend</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">    method: withdraw,</div>
<div class="line">    amount: yyyy,</div>
<div class="line">    addr: some_addr_from_the_above_list</div>
<div class="line">}</div>
</div><!-- fragment --><p> When the player receives the withdraw, it checks whether the <code>addr</code> is actually owned by the backend wallet or not, the reason for this check is since the player is the only one who can access the backend wallet either remotely or directly in an authorized approach so he can only spend the funds belongs to the backend wallet.</p>
<h2><a class="anchor" id="autotoc_md75"></a>
step4: Backend sends withdrawInfo to the GUI</h2>
<div class="fragment"><div class="line"> {</div>
<div class="line">   method: withdrawInfo,</div>
<div class="line">   txid: tx_id,</div>
<div class="line">   balance: zzzz</div>
<div class="line">}</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md76"></a>
Conditions on withdrawing the funds</h2>
<ol type="1">
<li>Funds can be transferred only to the address which are owned by the backend wallet.</li>
</ol>
<h1><a class="anchor" id="autotoc_md77"></a>
Improving the usability</h1>
<p>Say for example, if the player wants to maintain the funds via GUI wallet, the following steps needs to be followed:</p><ol type="1">
<li>Players generates the new address in the backend wallet.</li>
<li>Export the backend wallet to the GUI wallet which the player wishes to use to manage the funds. That's it, so now the wallet in the GUI and backend node knows the privkey of the address, then the player can spend the funds from anywhere.</li>
</ol>
<h1><a class="anchor" id="autotoc_md78"></a>
Security Concerns</h1>
<p>From the above discussion it's clear that funds can't be moved out of the players wallet.</p>
<p>Any concerns related to the security will be discussed here. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 22 2021 18:33:23 for Bet by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
